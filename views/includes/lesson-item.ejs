<div class="list-group-item text-md-left text-center">
    <div class="row">
        <div class="col-md-5 text-md-left text-center">
            <%= lesson.date %>
        </div>
        <div class="col-md-3 text-md-left text-center">
            <%= lesson.maxSlots-lesson.participants.length %> su <%= lesson.maxSlots %> posti
        </div>
        <div class="col-md-2 text-md-left text-center">
            <%= lesson.type %>
        </div>
        <div class="col-md-2 text-md-right text-center">
            <form action="/reserve-slot" method="POST">
                <% if(lesson.participants.find(part => part.userId && part.userId.toString() === userId.toString())){ %>
                    <button type="button" class="btn btn-sm btn-outline-success disabled btn-block" disabled>Prenotato</button>
                <% }else if(lesson.maxSlots <= lesson.participants.length){ %>
                    <button type="button" class="btn btn-sm btn-outline-danger disabled btn-block" disabled>Limite raggiunto</button>
                <% }else{ %>   
                    <button class="btn btn-sm btn-info btn-block" type="submit" onclick="return onReserveSlot();">Prenota un posto</button>
                <% } %>
                <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                <input type="hidden" name="lessonId" value="<%= lesson._id %>">
            </form>
        </div>
    </div>    
</div>